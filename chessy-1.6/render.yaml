services:
  - type: worker
    name: chessy-1.6-trainer
    runtime: cpp
    buildCommand: |
      apt-get update && apt-get install -y build-essential cmake
      ./build.sh
    startCommand: python3 train_cloud.py
    envVars:
      - key: PYTHONUNBUFFERED
        value: "1"
      - key: STOCKFISH_PATH
        value: "./stockfish/stockfish"
    disk:
      name: training-data
      mountPath: /var/data
      sizeGB: 10
    scaling:
      minInstances: 1
      maxInstances: 1
    timeout: 86400  # 24 hours
